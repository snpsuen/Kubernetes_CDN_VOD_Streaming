apiVersion: batch/v1
kind: job
metadata:
  name: vod-provision
spec:
  selector:
    matchLabels:
      app: vod-provision
  template:
    metadata:
      labels:
        app: vod-provision
    spec:
      containers:
        - name: vod-provision
          image: snpsuen/vod-provision:v02
          command: ['/workspace/vod-provision.sh']
          volumeMounts:
            - name: hls-vol
              mountPath: /var/www/html/hls
            - name: new-vod-vol
              mountPath: /vod/new
      volumes:
        - name: hls-vol
          persistentVolumeClaim:
            claimName: hls-pvc
        - name: new-vod-vol
          hostPath:
            path: /root/vod/new
            type: Directory
      restartPolicy: Never
